<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

	
    <title><block name='title'>{$titlename} </block></title>
  
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico"> <link href="/Public/static/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/Public/static/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="/Public/static/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
    <link href="/Public/static/css/animate.css" rel="stylesheet">
    <link href="/Public/static/css/style.css?v=4.1.0" rel="stylesheet">
    

    
<style>
#exampleToolbar .btn{margin-right:5px;}
.float-e-margins .btn{margin-bottom:0;}
.fixed-table-toolbar .bars, .fixed-table-toolbar .columns, .fixed-table-toolbar .search {margin-top:0px;}
</style>
</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeIn">


        <!-- Panel Other -->
        <div class="ibox float-e-margins">
         
            <div class="ibox-content">
                <div class="row row-lg">
                  
                    <div class="col-sm-12">
                        <!-- Example Toolbar -->
                        <div class="example-wrap ">
                           
                            <block name='toolBar'>
                              {:getToolIcon('add','J_open btn-sm',U('add'))}
                                {:getToolIcon('delete','J_confirm  btn-sm',U('delete'))}
                                 {:getToolIcon('on','J_multiple  btn-sm',U('enable'))}
                                 {:getToolIcon('off','J_multiple btn-sm',U('disable'))}
                            </block>
                            
                            <block name='ibox-tools'>
                            
                                    <div class="ibox-tools">
			                        <!--     <a class="collapse-link">
			                                <i class="fa fa-chevron-up"></i>
			                            </a> -->
			                            <a class="dropdown-toggle" onclick="window.location.reload();">
			                                <i class="fa fa-refresh"></i>
			                            </a>
			                           <!--  <a class="close-link">
			                                <i class="fa fa-times"></i>
			                            </a> -->
			                        </div>
                        </block>
                          
                            <div class="example" style='margin-top:5px;'>
                                <div class=" btn-group hidden-xs" id="exampleToolbar" role="group">
                                
                                  <form role="form" id="searchForm" class="form-inline">
                                    <block name="searchForm">
                           		 <div class="form-group">
                                <label for="exampleInputEmail2" class="sr-only">用户名</label>
                                <input type="text" name=username  placeholder="用户名" id="exampleInputEmail2" class="form-control">
                           		 </div>
                           		  <div class="form-group">
                                <label for="exampleInputEmail2" class="sr-only">姓名</label>
                                <input type="text" name='realname' placeholder="姓名" id="exampleInputEmail2" class="form-control">
                           		 </div>
                           		  <div class="form-group">
                                <label for="exampleInputEmail2" class="sr-only">手机</label>
                                <input type="text" name='mobile' placeholder="手机号" id="exampleInputEmail2" class="form-control">
                           		 </div>
                           		 
                           	 	 </block>
                            <button class="btn btn-white " type="button" onclick="formSearch()">搜索</button>
                       	 </form>
                   
                      </div>
                                
                     
                </div>
                                
                                <table id="exampleTableToolbar" data-mobile-responsive="true">
                                    <thead >
                                        <tr>
                                        <block name='thead'>
										     <th data-field="state" data-checkbox="true" ></th>
                                            <th data-field="name"  data-sortable="true">名称</th>
                                            <th data-field="star"  data-sortable="true" >路由</th>
                                            <th data-field="license"  data-sortable="true">类型</th>
                                            <th data-field="description"  data-sortable="true">图标</th>
                                            <th data-field="U" data-formatter="operateFormatter" data-events="operateEvents">操作</th>
                                       	</block>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                        <!-- End Example Toolbar -->
                    </div>

   


                </div>
            </div>
        </div>
        <!-- End Panel Other -->
    </div>

    <!-- 全局js -->
    <script src="/Public/static/js/jquery.min.js?v=2.1.4"></script>
    <script src="/Public/static/js/bootstrap.min.js?v=3.3.6"></script>
	  <script src="/Public/static/js/plugins/layer/layer.min.js"></script>
     <!-- Peity -->
    <script src="/Public/static/js/plugins/iCheck/icheck.min.js"></script>
    <!-- 自定义js -->
    <script src="/Public/static/js/content.js?v=1.0.0"></script>


    <!-- Bootstrap table -->
    
    <script src="/Public/static/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script src="/Public/static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
    
    <script src="/Public/static/js/plugins/bootstrap-table/tableExport.min.js"></script>

    <script src="/Public/static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
  
     <script src="/Public/static/js/plugins/bootstrap-table/extensions/export/bootstrap-table-export.js"></script>

	<script>
	
	
 (function() {
		  
	 <block name='tableset'>
	    $('#exampleTableToolbar').bootstrapTable({
	      url: "{:U()}",
	      search: false,
	      showRefresh: true,
	      uniqueId:'id',
	      showToggle: true,
	      showColumns: true,
	      toolbar: '#exampleToolbar',
		  pagination:true,
		  pageSize:15,
		  sortOrder:'desc',
		   pageList: [15, 30, 50, 100,300], //可供选择的每页的行数（*）  
		  sidePagination:'server',
		  searchText:'',
	      iconSize: 'outline',
	     // selectItemName:'chkid',
	     // cache:true,
	      //clickToSelect: true,//点击行即可选中单选/复选框  
	     // showFullscreen:true,
	      //detailView:true,
		  //cardView:true,
		  //detailView:true,
		  <if condition="allow(CONTROLLER_NAME.'/export')">
		    showExport: true,  //是否显示导出按钮
		    <else/>
	      showExport: false,  //
		  </if>
		    exportDataType:'all',  
		   // exportTypes:['excel'],  //导出文件类型  
		  
		    exportOptions:{  
		           ignoreColumn: [0,1],  //忽略某一列的索引  
		           fileName: '{$exporttitle|default="数据导出"}',  //文件名称设置  
		           worksheetName: 'sheet1',  //表格工作区名称  
		           tableName: '数据导出',  
		           //excelstyles: ['background-color', 'color', 'font-size', 'font-weight'],  
		           onMsoNumberFormat: DoOnMsoNumberFormat  
		       },  
		   
	      icons: {
	        refresh: 'glyphicon-repeat',
	        toggle: 'glyphicon-list-alt',
	        columns: 'glyphicon-list',
	        export: 'glyphicon-export icon-share'
	      },
	      queryParams:queryParams,
	      
	    })
	    
	  
	    
	    function queryParams(params){
	    	return {limit:params.limit,
	    			offset:params.offset,
	    			sort:params.sort,
	    			order:params.order,
	    			formfield:$('#searchForm').serialize(),
	    	}
	    }
	    
	    function DoOnMsoNumberFormat(cell, row, col) {  
	        var result = "";  
	        if (row > 0 && col == 0)  
	            result = "\\@";  
	        return result;  
	    }  
	 
	
</block>
  })();
  
 function formSearch(){
 	$('#exampleTableToolbar').bootstrapTable(('refresh'));
 }
 
 function setCheckbox(value, row, index) {
		var str = ' <input type="checkbox"  class="i-checks" value="'+row.id+'" name="chkid">';
		
  return [str].join('');
  return;
}
 
 function getall(obj){
	 var stat = $(obj).data('ck');
	 if(stat==0){
		 console.log('check');
		 $(obj).data('ck',1);
		 $('input[name="chkid"]').prop('checked',true);
	 }else{
		 console.log('uncheck');
		 $(obj).data('ck',0);
		 $('input[name="chkid"]').prop('checked',false);
		
	 }
	 
 }

	
	
  
	</script>
	
	<block name='extend'>
	
	
	</block>

	
</body>

</html>
